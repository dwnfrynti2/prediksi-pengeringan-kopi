<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prediksi Waktu Pengeringan Kopi di Dome</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* ===== Variabel Warna untuk Tema Terang dan Gelap ===== */
        :root {
            --bg-body: #f4f4f4;
            --bg-card: white;
            --bg-header: #5D4037;
            --bg-footer: #523e39;
            --color-text-primary: #333;
            --color-text-secondary: #555;
            --color-accent: #795548;
            --color-header-text: white;
            --color-border: #E0E0E0;
            --color-shadow: rgba(0, 0, 0, 0.05);
            --color-switch-bg: #ccc;
            --bg-accordion: #f9f9f9;
        }

        body.dark-mode {
            --bg-body: #121212;
            --bg-card: #1E1E1E;
            --bg-header: #2d201c;
            --bg-footer: #211a18;
            --color-text-primary: #E0E0E0;
            --color-text-secondary: #B0B0B0;
            --color-accent: #A1887F;
            --color-header-text: #E0E0E0;
            --color-border: #424242;
            --color-shadow: rgba(255, 255, 255, 0.05);
            --color-switch-bg: #555;
            --bg-accordion: #2a2a2a;
        }

        /* ===== Gaya Dasar ===== */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background-color: var(--bg-body);
            color: var(--color-text-primary);
            padding-bottom: 120px; /* Disesuaikan untuk footer */
            transition: background-color 0.3s, color 0.3s;
        }

        /* Header, Logo, dan Toggle Switch */
        .header {
            background-color: var(--bg-header);
            color: var(--color-header-text);
            padding: 10px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: background-color 0.3s;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .logo-header {
            height: 30px;
            width: 40px; 
            border-radius: 8px; 
        }
        .header h1 {
            margin: 0;
            font-size: 1.4em;
        }
        .header-right {
            display: flex;
            align-items: center;
        }

        /* Navigasi */
        .nav a {
            color: var(--color-header-text);
            text-decoration: none;
            margin-left: 20px;
            font-size: 1em;
            padding-bottom: 5px;
            transition: opacity 0.3s, border-bottom-color 0.3s, transform 0.3s;
            border-bottom: 2px solid transparent;
            display: inline-flex;
            align-items: center;
        }
        .nav a.active {
            font-weight: bold;
            border-bottom-color: #FFC107;
        }
        .nav a:hover {
            opacity: 0.8;
            transform: translateY(-2px);
        }
        .nav svg {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            fill: var(--color-header-text);
        }

        /* Toggle Switch Mode Gelap/Terang */
        .theme-switch-wrapper {
            display: flex;
            align-items: center;
            margin-left: 25px;
        }
        .theme-switch {
            display: inline-block;
            height: 34px;
            position: relative;
            width: 60px;
        }
        .theme-switch input {
            display:none;
        }
        .slider {
            background-color: var(--color-switch-bg);
            bottom: 0;
            cursor: pointer;
            left: 0;
            position: absolute;
            right: 0;
            top: 0;
            transition: .4s;
        }
        .slider:before {
            background-color: #fff;
            bottom: 4px;
            content: "";
            height: 26px;
            left: 4px;
            position: absolute;
            transition: .4s;
            width: 26px;
        }
        input:checked + .slider {
            background-color: #795548;
        }
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        .slider.round {
            border-radius: 34px;
        }
        .slider.round:before {
            border-radius: 50%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="orange"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.03-3.92 3.26-7.08 7.21-7-1.96.65-3.53 2.22-4.18 4.18C6.46 10.74 4.5 11.82 2.94 13.06L2 13zm19.06-1.94c-1.56-1.24-3.52-2.32-4.18-4.18C15.74 6.26 18.97 9.08 19.06 13h2l-.94-1.94zM12 2v2.02C15.92 4.54 19 8.36 19 12.5c-2.08.19-3.96.96-5.46 2.12C12.71 13.5 12 12.28 12 11c0-1.28.71-2.5 1.54-3.38-1.5-.86-3.38-1.54-5.38-1.54C4.08 6.08 1 9.9 1 13.92V14h2c0-1.84 1.66-3.32 3.75-2.82 1.39.33 2.54 1.48 2.87 2.87C10.68 16.34 9 18 7.16 18H7v2h.16C10.97 20 14 16.97 14 13.16V13c.09-3.37-2.61-6.16-5.98-6.16H8V2h4z"/></svg>');
            background-repeat: no-repeat;
            background-position: center;
        }
        input:checked + .slider:before {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="%235D4037"><path d="M9.37 5.51A7.35 7.35 0 0 0 9.1 7.5c0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27C17.45 17.19 14.93 19 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49z"/></svg>');
        }
        
        /* Konten */
        .main-content {
            padding: 20px;
            max-width: 800px;
            margin: 20px auto;
        }
        .page {
            display: none;
        }
        .page.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background-color: var(--bg-card);
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 4px 8px var(--color-shadow);
            margin-bottom: 20px;
            border: 1px solid var(--color-border);
            transition: background-color 0.3s, border-color 0.3s;
        }
        .card h2, .card h3 {
            color: var(--color-accent);
            display: flex;
            align-items: center;
        }
        .card h2 {
            border-bottom: 2px solid var(--color-border);
            margin-top: 0;
            padding-bottom: 10px;
        }

        /* UKURAN IKON DISERAGAMKAN */
        .card h2 svg, .card h3 svg {
            width: 24px;
            height: 24px;
            margin-right: 10px;
            fill: var(--color-accent);
            transition: fill 0.3s;
            flex-shrink: 0; 
        }
        
        /* Gaya Slider Gambar */
        .slider-container {
            position: relative;
            width: 100%;
            height: 300px; 
            margin: 20px 0;
            border-radius: 8px;
            overflow: hidden;
            background-color: var(--bg-body);
        }
        .slider-container .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover; 
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }
        .slider-container .slide.active {
            opacity: 1;
        }
        
        /* Gaya Video Lokal & Gambar Alur */
        .card video, .alur-image {
            width: 100%; 
            height: auto;
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid var(--color-border);
        }

        /* Form */
        .form-group {
            margin-bottom: 15px;
            position: relative;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--color-text-secondary);
            transition: color 0.3s;
        }
        .form-group input {
            width: 100%;
            padding: 12px 12px 12px 45px;
            box-sizing: border-box;
            border-radius: 4px;
            background-color: var(--bg-body);
            color: var(--color-text-primary);
            border: 1px solid var(--color-border);
            transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s;
        }
        .form-group input:focus {
            border-color: var(--color-accent);
            box-shadow: 0 0 5px color-mix(in srgb, var(--color-accent) 30%, transparent);
            outline: none;
        }
        .form-group > svg {
            position: absolute;
            left: 12px;
            top: 38px;
            width: 20px;
            height: 20px;
            pointer-events: none;
            fill: var(--color-accent);
            transition: fill 0.3s;
        }

        /* Opsi Cuaca */
        .weather-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 10px;
        }
        .weather-options button {
            padding: 12px;
            border: 1px solid var(--color-accent);
            background-color: var(--bg-card);
            color: var(--color-accent);
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.2s ease-out;
            box-shadow: 0 2px 4px var(--color-shadow);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .weather-options button svg {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            fill: var(--color-accent);
            transition: fill 0.2s ease-out;
        }
        .weather-options button.selected {
            background-color: var(--color-accent);
            color: var(--bg-card);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px color-mix(in srgb, var(--color-shadow) 200%, black);
        }
        .weather-options button.selected svg {
            fill: var(--bg-card);
        }
        .weather-options button:hover:not(.selected) {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px color-mix(in srgb, var(--color-shadow) 150%, black);
        }

        /* Tombol */
        .btn-submit, #clearHistory {
            padding: 15px;
            background-color: var(--bg-header);
            color: var(--color-header-text);
            border: none;
            border-radius: 5px;
            font-size: 1.2em;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
        }
        .btn-submit svg, #clearHistory svg {
            width: 22px;
            height: 22px;
            margin-left: 10px;
            fill: var(--color-header-text);
        }
        .btn-submit:hover, #clearHistory:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 10px rgba(0,0,0,0.15);
        }
        .btn-submit:active, #clearHistory:active {
            transform: translateY(0);
        }
        #clearHistory{
            font-size: 1em;
            padding: 10px 15px;
            width: auto;
            background-color: #c0392b;
        }
        #clearHistory:hover{
            background-color: #943126;
        }

        /* Hasil & Riwayat */
        .prediction-result {
            background-color: var(--bg-body);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            text-align: center;
            padding: 20px;
            margin-top: 20px;
        }
        #hasilPrediksi {
            font-size: 1.2em;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-text-primary);
        }
        #hasilPrediksi svg {
            width: 28px;
            height: 28px;
            margin-right: 10px;
            fill: var(--color-text-primary);
            flex-shrink: 0;
        }
        .prediction-details-container {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--color-border);
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 12px;
            width: 100%;
        }
        .detail-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.05em;
            font-weight: 500;
            color: var(--color-text-secondary);
        }
        .detail-item svg {
            width: 22px;
            height: 22px;
            fill: var(--color-accent);
            flex-shrink: 0;
        }
        #historyList {
            list-style-type: none;
            padding: 0;
        }
        #historyList li {
            background: var(--bg-body);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            border: 1px solid var(--color-border);
            border-left: 5px solid var(--color-accent);
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideInLeft 0.4s ease-out;
        }
        @keyframes slideInLeft {
            from { transform: translateX(-30px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        .delete-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 3px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
        }
        .delete-btn svg {
            width: 16px;
            height: 16px;
            margin-left: 5px;
            fill: white;
        }
        .delete-btn:hover {
            background: #c0392b;
            transform: scale(1.05);
        }
        
        /* Gaya Panduan Interaktif */
        .panduan-container {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }
        .panduan-nav {
            flex-basis: 200px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .panduan-btn {
            padding: 12px 15px;
            text-align: left;
            background-color: var(--bg-body);
            border: 1px solid var(--color-border);
            color: var(--color-text-secondary);
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        .panduan-btn:hover {
            background-color: color-mix(in srgb, var(--bg-body) 85%, black);
            border-color: var(--color-accent);
        }
        .panduan-btn.active {
            background-color: var(--color-accent);
            color: var(--bg-card);
            font-weight: bold;
            border-color: var(--color-accent);
        }
        .panduan-content {
            flex: 1;
        }
        .panduan-panel {
            display: none;
        }
        .panduan-panel.active {
            display: block;
            animation: fadeIn 0.4s;
        }
        .panduan-panel h3 {
             margin-top: 0;
             padding-bottom: 8px;
             border-bottom: 1px solid var(--color-border);
        }
        .panduan-panel ul {
            list-style-position: inside;
            padding-left: 0;
            line-height: 1.6;
        }
        .panduan-image {
            flex-basis: 250px;
        }
        .panduan-image img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-radius: 8px;
            border: 1px solid var(--color-border);
            transition: opacity 0.4s;
        }

        /* Gaya Accordion (untuk FAQ) */
        #panduan-kopi ul {
            list-style-position: inside;
            padding-left: 0;
        }
        #panduan-kopi li {
            margin-bottom: 8px;
        }
        .accordion-item {
            border: 1px solid var(--color-border);
            border-radius: 5px;
            margin-bottom: 10px;
            overflow: hidden;
        }
        .accordion-question {
            background-color: var(--bg-accordion);
            color: var(--color-text-primary);
            cursor: pointer;
            padding: 15px;
            width: 100%;
            text-align: left;
            border: none;
            outline: none;
            font-size: 1em;
            transition: background-color 0.3s;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
        }
        .accordion-question:hover {
            background-color: color-mix(in srgb, var(--bg-accordion) 80%, black);
        }
        .accordion-question::after {
            content: '+';
            font-size: 1.5em;
            color: var(--color-accent);
            transition: transform 0.3s ease;
        }
        .accordion-question.active::after {
            transform: rotate(45deg);
        }
        .accordion-answer {
            padding: 0 15px;
            background-color: var(--bg-card);
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
        }
        .accordion-answer p {
            padding: 15px 0;
            margin: 0;
        }
        
        /* Footer */
        .footer {
            padding: 10px;
            background-color: var(--bg-footer);
            color: var(--color-header-text);
            position: fixed;
            width: 100%;
            bottom: 0;
            z-index: 100;
            transition: background-color 0.3s;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        .footer-content h4 {
            margin: 0;
            font-weight: 500;
            font-size: 0.9em;
            color: var(--color-header-text);
            opacity: 0.8;
        }
        
        .footer-logos img {
            height: 40px;
            width: auto;
            opacity: 0.9;
            filter: brightness(1.2); 
        }
        
        .footer-content p {
            margin: 0;
            font-size: 0.8em;
            opacity: 0.7;
        }

        /* ===== [PERBAIKAN] Gaya Responsif untuk Layar Kecil (Mobile) ===== */
        @media (max-width: 768px) {
            body {
                padding-bottom: 150px; /* Beri ruang lebih untuk footer yang lebih tinggi */
            }

            .main-content {
                padding: 10px;
                margin: 10px auto;
            }

            /* Atur ulang header agar lebih ramah mobile */
            .header {
                flex-direction: column;
                align-items: flex-start;
                padding: 15px;
                gap: 15px;
            }

            .header-left {
                width: 100%;
            }

            .header-right {
                width: 100%;
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }

            .header h1 {
                font-size: 1.1em;
            }

            .nav {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 5px 15px;
                width: 100%;
                order: 2; /* Pindahkan navigasi setelah toggle */
            }

            .nav a {
                margin-left: 0;
                font-size: 0.9em;
            }

            .theme-switch-wrapper {
                margin-left: 0;
                order: 1; /* Pindahkan toggle ke atas navigasi */
            }

            /* Ubah tata letak form dan card */
            .card {
                padding: 15px;
            }
            
            .weather-options {
                grid-template-columns: 1fr; /* Buat tombol cuaca menjadi 1 kolom */
            }

            /* Ubah tata letak panduan interaktif */
            .panduan-container {
                flex-direction: column; /* Susun navigasi dan konten secara vertikal */
            }
            
            .panduan-nav {
                flex-basis: auto;
                flex-direction: row; /* Buat tombol navigasi berjajar */
                flex-wrap: wrap; /* Izinkan tombol untuk wrap */
                justify-content: center;
            }

            .panduan-image {
                display: none; /* Sembunyikan gambar panduan di mobile untuk hemat ruang */
            }

            /* Sesuaikan ukuran font */
            .card h2 {
                font-size: 1.3em;
            }

            .card h3 {
                font-size: 1.1em;
            }

            /* Sesuaikan footer */
            .footer {
                padding: 15px;
            }
            .footer-logos img {
                height: 30px;
            }
            .footer-content h4 {
                font-size: 0.8em;
            }
            .footer-content p {
                font-size: 0.7em;
                text-align: center;
            }
        }
    </style>
</head>
<body>

    <header class="header">
        <div class="header-left">
            <!-- [DIUBAH] Mengembalikan nama file gambar asli -->
            <img src="Screenshot 2025-06-29 221242.jpg" alt="Logo Kopi" class="logo-header">
            <h1>Prediksi Waktu Pengeringan Kopi di Dome</h1>
        </div>
        <div class="header-right">
            <nav class="nav">
                <a href="#beranda" onclick="showPage('beranda')" class="active"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 4 12h3v8h3z"/></svg>Beranda</a>
                <a href="#cek-prediksi" onclick="showPage('cek-prediksi')"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,3H14.82C14.4,1.84 13.3,1 12,1C10.7,1 9.6,1.84 9.18,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M12,3A1,1 0 0,1 13,4A1,1 0 0,1 12,5A1,1 0 0,1 11,4A1,1 0 0,1 12,3M7,15V13H17V15H7M7,11V9H17V11H7M7,7V5H17V7H7Z"/></svg>Cek Prediksi</a>
                <a href="#hasil-grafik" onclick="showPage('hasil-grafik')"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.5 12h-1.5v6h1.5v-6zm-3-3h-1.5v9h1.5V9zm-3-3H9v12h1.5V6zM21 4H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-1 14H4V6h16v12z"/></svg>Hasil Grafik</a>
                <a href="#riwayat-prediksi" onclick="showPage('riwayat-prediksi')"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.25 2.52.77-1.28-3.52-2.09V8H12z"/></svg>Riwayat</a>
                <a href="#panduan-kopi" onclick="showPage('panduan-kopi')"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/></svg>Panduan</a>
            </nav>
            <div class="theme-switch-wrapper">
                <label class="theme-switch" for="checkbox">
                    <input type="checkbox" id="checkbox" />
                    <div class="slider round"></div>
                </label>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div id="beranda" class="page active">
            <div class="card">
                <h2><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 4 12h3v8h3z"/></svg>Selamat datang di sistem prediksi waktu pengeringan kopi!</h2>

                <div class="slider-container">
                    <!-- [DIUBAH] Mengembalikan nama file gambar asli -->
                    <img src="Dome1.jpg" alt="Gambar Dome Kopi 1" class="slide active">
                    <img src="Rumah Solar Dryer Dome (Tampak Depan) (1).jpg" alt="Gambar Dome Kopi 2" class="slide">
                    <img src="kopi3.jpg" alt="Gambar Biji Kopi" class="slide">
                </div>
                
                <p>Smart Dryer Dome Kopi adalah ruangan setengah lingkaran yang memanfaatkan energi surya dan pemanas buatan. Dengan desain ini, proses pengeringan kopi menjadi lebih cepat, efisien, dan kualitas hasil panen tetap terjaga. Sistem prediksi ini membantu Anda memperkirakan berapa lama waktu yang dibutuhkan agar kopi benar-benar kering, sesuai dengan kondisi lingkungan pada dome.</p>
                <p>Smart Dryer Dome ini berlokasi di <b>SMKN 1 Jarai</b> dan umumnya digunakan untuk mengeringkan <b>kopi robusta</b> dengan kapasitas maksimal <b>50 kg per batch</b>.</p>
            </div>
            
            <div class="card">
                <h3><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z" /></svg>Bagaimana Sistem Smart Dryer Dome Ini Bekerja?</h3>
                
                <!-- [DIUBAH] Mengembalikan nama file video asli -->
                <video controls src="Video singkat Alat.mp4" style="background-color: #000;">
                    Browser Anda tidak mendukung tag video.
                </video>
                
                <p>Panel surya menghasilkan listrik untuk menyalakan seluruh perangkat di dome, mulai dari sensor, lampu pemanas, kipas, hingga router Wi-Fi. Sensor secara otomatis membaca suhu, kelembaban, dan cahaya secara berkala.</p>
                <ol>
                    <li>Data kondisi lingkungan (suhu, kelembaban, cahaya) dapat Anda lihat di web monitoring.</li>
                    <li>Input data dari hasil monitoring tersebut ke halaman <b>'Cek Prediksi'</b> di web ini.</li>
                    <li>Sistem prediksi akan menghitung estimasi waktu pengeringan dan memberikan tips optimal.</li>
                </ol>
            </div>

            <div class="card">
                <h3><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 14h4v-4H3v4zm0 5h4v-4H3v4zM3 9h4V5H3v4zm5 5h13v-4H8v4zm0 5h13v-4H8v4zM8 5v4h13V5H8z"/></svg>Alur Penggunaan Sistem</h3>
                
                <!-- [DIUBAH] Mengembalikan nama file gambar asli -->
                <img src="Alur Sistem Perangkat.png" alt="Alur Sistem: Perangkat ke Web Monitoring ke Web Prediksi" class="alur-image">
                
                <div class="container">
                    <h1>Panduan Sistem Prediksi Pengeringan Kopi</h1>

                    <div class="komponen-sistem">
                        <h2>Mengenal Komponen Sistem</h2>
                        <div class="komponen">
                            <h3>Sistem Perangkat ⚙️</h3>
                            <p>Proses pengeringan kopi dimulai di dalam dome yang sudah dilengkapi panel surya, sensor, dan pemanas otomatis. Semua alat ini bekerja secara otomatis untuk menyesuaikan kondisi di dalam dome.</p>
                        </div>
                        <div class="komponen">
                            <h3>Web Monitoring 📊</h3>
                            <p>Anda bisa memantau suhu, kelembaban, dan kondisi dome lewat web monitoring. Cukup lihat data terbaru yang muncul di sana.</p>
                        </div>
                        <div class="komponen">
                            <h3>Web Prediksi ⏱️</h3>
                            <p>Untuk tahu perkiraan waktu kopi akan kering, cukup salin data dari web monitoring, lalu masukkan ke web prediksi ini. Hasil prediksi akan langsung muncul, lengkap dengan tips agar proses pengeringan jadi lebih mudah.</p>
                        </div>
                    </div>

                    <hr style="border: 1px solid var(--color-border); margin: 30px 0;">

                    <div class="langkah-langkah">
                        <h2>Langkah-Langkah Mendapatkan Prediksi</h2>
                        <ol>
                            <li>
                                <div>
                                    <strong>Pantau</strong>
                                    Cek data terbaru (suhu & kelembaban) melalui Web Monitoring.
                                </div>
                            </li>
                            <li>
                                <div>
                                    <strong>Input</strong>
                                    Salin data tersebut dan masukkan ke formulir pada Web Prediksi. Ingat, kapasitas maksimalnya adalah 50 kg.
                                </div>
                            </li>
                            <li>
                                <div>
                                    <strong>Dapatkan Hasil</strong>
                                    Lihat estimasi waktu kopi akan kering beserta tips pengeringan optimal yang ditampilkan.
                                </div>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>

        <div id="cek-prediksi" class="page">
            <div class="card">
                <h2><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,3H14.82C14.4,1.84 13.3,1 12,1C10.7,1 9.6,1.84 9.18,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M12,3A1,1 0 0,1 13,4A1,1 0 0,1 12,5A1,1 0 0,1 11,4A1,1 0 0,1 12,3M7,15V13H17V15H7M7,11V9H17V11H7M7,7V5H17V7H7Z"/></svg>Input Data Monitoring</h2>
                 <p>Pantau data dari web monitoring, lalu inputkan ke kolom yang tersedia di bawah ini.</p>
                <form id="predictionForm">
                    <div class="form-group">
                        <label for="suhu">Suhu (°C)</label>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15 13V5c0-1.66-1.34-3-3-3S9 3.34 9 5v8c-1.21.91-2 2.37-2 4 0 2.76 2.24 5 5 5s5-2.24 5-5c0-1.63-.79-3.09-2-4zm-4-8c0-.55.45-1 1-1s1 .45 1 1v7.27c.58.14 1.12.4 1.6.77l.4.3c.75.56 1.25 1.48 1.44 2.5.15.8-.13 1.59-.69 2.15-.56.56-1.35.85-2.15.69-.73-.13-1.39-.5-1.88-1.06l-.48-.54c-.94-.94-1.5-2.25-1.5-3.64 0-1.31.53-2.5 1.5-3.36V5z"/></svg>
                        <input type="number" id="suhu" name="suhu" min="0" max="60" step="0.1" value="45.0" required>
                    </div>
                    <div class="form-group">
                        <label for="kelembaban">Kelembaban (%)</label>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2.69l5.99 5.99c1.48 1.47 2.34 3.52 2.34 5.66 0 4.41-3.59 8-8 8s-8-3.59-8-8c0-2.14.86-4.19 2.34-5.66L12 2.69M12 0L6.34 5.66C4.42 7.59 3.25 10.1 3.25 12.75c0 5.52 4.48 10 10 10s10-4.48 10-10c0-2.65-1.17-5.16-3.09-7.09L12 0z"/></svg>
                        <input type="number" id="kelembaban" name="kelembaban" min="0" max="100" step="0.1" value="30.0" required>
                    </div>
                    <div class="form-group">
                        <label for="jam_mulai">Jam Mulai (format HH:MM)</label>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c4.4 0 8-3.6 8-8s-3.6-8-8-8-8 3.6-8 8 3.6 8 8 8zm0-14c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6 2.7-6 6-6zM12.5 7H11v6l5.2 3.2.8-1.3-4.5-2.7V7z"/></svg>
                        <input type="time" id="jam_mulai" name="jam_mulai" value="08:30" required>
                    </div>
                    <div class="form-group">
                        <label for="massa">Massa Kopi (kg) - Maksimal 50 kg</label>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.14,10.12c-0.29-0.28-0.63-0.44-1.02-0.44h-0.08c-0.39,0-0.73,0.16-1.02,0.44l-2.65,2.56c-0.38,0.37-0.6,0.88-0.6,1.45v0.17c0,0.57,0.23,1.08,0.6,1.45l2.65,2.56c0.29,0.28,0.63,0.44,1.02,0.44h0.08c0.39,0,0.73-0.16,1.02-0.44l2.65-2.56c0.38-0.37,0.6,0.88,0.6,1.45v-0.17c0-0.57-0.23-1.08-0.6-1.45L15.14,10.12zM8.86,10.12c0.29-0.28,0.63-0.44,1.02-0.44h0.08c0.39,0,0.73,0.16,1.02,0.44l2.65,2.56c0.38,0.37,0.6,0.88,0.6,1.45v0.17c0,0.57-0.23,1.08,0.6,1.45l-2.65,2.56c-0.29-0.28-0.63-0.44-1.02,0.44h-0.08c-0.39,0-0.73-0.16-1.02-0.44l-2.65-2.56c-0.38-0.37-0.6-0.88-0.6-1.45v-0.17c0-0.57,0.23,1.08,0.6-1.45L8.86,10.12zM12,2A8,8 0 0,0 4,10c0,4.96,6,12,8,12s8-7.04,8-12A8,8 0 0,0 12,2M12,20c-2.67,0-6-6.67-6-10a6,6 0 0,1 12,0C18,13.33,14.67,20,12,20z"/></svg>
                        <input type="number" id="massa" name="massa" step="0.1" max="50" value="25.0" required>
                    </div>
                    <div class="form-group">
                        <label for="lama_nyala">Lama Nyala Pemanas per Hari (Jam)</label>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c4.4 0 8-3.6 8-8s-3.6-8-8-8-8 3.6-8 8 3.6 8 8 8zm0-14c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6 2.7-6 6-6zM12.5 7H11v6l5.2 3.2.8-1.3-4.5-2.7V7z"/></svg>
                        <input type="number" id="lama_nyala" name="lama_nyala" value="8" required>
                    </div>
                    
                    <h3><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.28 14.28C17.5 13.5 16.55 13 15.5 13s-2 .5-2.78 1.28C11.95 15.05 11 16.22 11 17.5c0 1.93 1.57 3.5 3.5 3.5s3.5-1.57 3.5-3.5c0-1.28-.95-2.45-1.72-3.22zM20 12c0-4.42-3.58-8-8-8s-8 3.58-8 8c0 2.03.78 3.9 2.08 5.3C7.21 16.09 8.24 15.5 9.4 15.18c-1.04-1.22-1.65-2.75-1.65-4.43C7.75 7.96 9.71 6 12 6s4.25 1.96 4.25 4.75c0 1.68-.61 3.21-1.65 4.43.91.31 1.95.77 3.11 1.45C19.22 15.9 20 14.03 20 12z"/></svg>Cuaca di Sekitar (Pengganti Intensitas Cahaya)</h3>
                    <div class="weather-options">
                        <button type="button" class="weather-btn" data-weather="agak mendung"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M18 10h-1.26A8 8 0 1 0 6 12.26V13h12v-3zM8 12c0-2.21 1.79-4 4-4s4 1.79 4 4H8z"/></svg>Agak Mendung</button>
                        <button type="button" class="weather-btn" data-weather="cerah"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.03-3.92 3.26-7.08 7.21-7-1.96.65-3.53 2.22-4.18 4.18C6.46 10.74 4.5 11.82 2.94 13.06L2 13zm19.06-1.94c-1.56-1.24-3.52-2.32-4.18-4.18C15.74 6.26 18.97 9.08 19.06 13h2l-.94-1.94zM12 2v2.02C15.92 4.54 19 8.36 19 12.5c-2.08.19-3.96.96-5.46 2.12C12.71 13.5 12 12.28 12 11c0-1.28.71-2.5 1.54-3.38-1.5-.86-3.38-1.54-5.38-1.54C4.08 6.08 1 9.9 1 13.92V14h2c0-1.84 1.66-3.32 3.75-2.82 1.39.33 2.54 1.48 2.87 2.87C10.68 16.34 9 18 7.16 18H7v2h.16C10.97 20 14 16.97 14 13.16V13c.09-3.37-2.61-6.16-5.98-6.16H8V2h4z"/></svg>Cerah</button>
                        <button type="button" class="weather-btn" data-weather="cerah berawan"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4c.71 0 1.38.19 1.97.52l1.03.58 1.1-.94C11.12 9.01 12.98 8 15 8c2.61 0 4.83 1.85 5.5 4.32l.24.88.9.11c1.53.18 2.76 1.49 2.76 3.09 0 1.71-1.39 3.1-3.1 3.1z"/></svg>Cerah Berawan</button>
                        <button type="button" class="weather-btn" data-weather="mendung"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"/></svg>Mendung</button>
                    </div>
                    <input type="hidden" id="cuaca" name="cuaca" required>
                    <button type="submit" class="btn-submit">
                        Dapatkan Prediksi
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" transform="rotate(270)"><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14l-6-6z"/></svg>
                    </button>
                </form>
            </div>
            <div class="card prediction-result">
                <h2><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4s-6.67 2.59-7.35 6.04C2.34 10.36 0 12.91 0 16c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.36 8.67 9.48 7 12 7c2.76 0 5 2.24 5 5v1h2c1.66 0 3 1.34 3 3s-1.34 3-3 3z"/></svg>Perkiraan Durasi Pengeringan Kopi</h2>
                <div id="hasilPrediksi"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67V7z"/></svg>Hasil prediksi muncul disini</div>
                
                <div id="predictionDetails" class="prediction-details-container" style="display: none;">
                    <div class="detail-item">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.54 5.23l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM6.24 5h11.52l.83 1H5.42l.82-1zM5 19V8h14v11H5z"/></svg>
                        <span id="detailMassaKering"></span>
                    </div>
                    <div class="detail-item">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 18l2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6h-6z"/></svg>
                        <span id="detailPenyusutan"></span>
                    </div>
                </div>

                <p>Perkiraan ini berdasarkan kondisi yang Anda masukkan. Hasil bisa berbeda jika terjadi perubahan cuaca atau kelembaban.</p>
            </div>
        </div>

        <div id="hasil-grafik" class="page">
           <div class="card">
                <h2><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.5 12h-1.5v6h1.5v-6zm-3-3h-1.5v9h1.5V9zm-3-3H9v12h1.5V6zM21 4H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-1 14H4V6h16v12z"/></svg>Grafik Visualisasi Prediksi</h2>
                
                <div id="tampilanGrafikPenyusutan" style="height: 400px; margin-bottom: 30px;">
                    <p>Grafik penyusutan massa akan muncul di sini setelah prediksi dibuat.</p>
                    <canvas id="massaChart" style="display:none;"></canvas>
                </div>
                
                <hr style="border-top: 1px solid var(--color-border); margin: 25px 0;">

                <div id="tampilanGrafikInput" style="height: 400px;">
                    <p>Grafik visualisasi input akan muncul di sini setelah prediksi dibuat.</p>
                    <canvas id="inputChart" style="display:none;"></canvas>
                </div>
            </div>
        </div>

        <div id="riwayat-prediksi" class="page">
           <div class="card">
                <h2><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.25 2.52.77-1.28-3.52-2.09V8H12z"/></svg>Riwayat Prediksi</h2>
                <ul id="historyList"></ul>
                <button id="clearHistory" onclick="clearHistory()"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>Hapus Semua Riwayat</button>
            </div>
        </div>

        <div id="panduan-kopi" class="page">
            <div class="card">
                <h2><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/></svg>Panduan Kopi di Dome</h2>
                <h3 style="font-weight: 500; color: var(--color-text-secondary); margin-top: -10px;">Accordion Interaktif</h3>
                
                <div class="panduan-container">
                    <div class="panduan-nav">
                        <!-- [DIUBAH] Mengembalikan nama file gambar asli -->
                        <button class="panduan-btn active" data-target="panel-kondisi" data-image="Rumah Solar Dryer Dome (Tampak Dalam) (1).jpg">Kondisi Ideal Pengeringan</button>
                        <button class="panduan-btn" data-target="panel-pengaruh" data-image="kopi1.jpg">Pengaruh Suhu & Kelembaban</button>
                        <button class="panduan-btn" data-target="panel-tips" data-image="Dome1.jpg">Tips Praktis Pengeringan</button>
                        <button class="panduan-btn" data-target="panel-faq">FAQ (Pertanyaan Umum)</button>
                    </div>

                    <div class="panduan-content">
                        <div id="panel-kondisi" class="panduan-panel active">
                            <h3>Kondisi Ideal di Dome</h3>
                            <ul>
                                <li><b>Suhu optimal:</b> 45-50°C</li>
                                <li><b>Kelembaban ideal:</b> 20-40%</li>
                                <li><b>Kapasitas kopi:</b> Maksimal 50 kg per batch</li>
                            </ul>
                        </div>
                        <div id="panel-pengaruh" class="panduan-panel">
                                <h3>Pengaruh Faktor Lingkungan</h3>
                                <ul>
                                    <li><b>Suhu rendah:</b> Menyebabkan proses pengeringan menjadi lebih lama dan meningkatkan risiko kopi berjamur.</li>
                                    <li><b>Suhu tinggi:</b> Bisa merusak biji kopi, membuat biji cepat matang tetapi mutu aroma menurun.</li>
                                    <li><b>Kelembaban tinggi:</b> Menghambat penguapan air, sehingga kopi sulit kering dan bisa mudah berjamur.</li>
                                    <li><b>Kelembaban terlalu rendah:</b> Terutama bila suhu juga tinggi, dapat menyebabkan biji kopi pecah.</li>
                                </ul>
                        </div>
                        <div id="panel-tips" class="panduan-panel">
                            <h3>Tips Praktis</h3>
                            <ul>
                                <li>Jangan melebihi kapasitas maksimal 50 kg per batch.</li>
                                <li>Ratakan kopi pada setiap tray agar panas merata ke seluruh biji.</li>
                                <li>Pastikan sensor suhu dan kelembaban berfungsi dan bersih sebelum memulai pengeringan.</li>
                            </ul>
                        </div>
                        <div id="panel-faq" class="panduan-panel">
                            <h3>Pertanyaan Umum</h3>
                             <div class="accordion">
                                <div class="accordion-item">
                                    <button class="accordion-question">Apa yang harus saya lakukan sebelum menggunakan web prediksi ini?</button>
                                    <div class="accordion-answer">
                                        <p>Pastikan Anda sudah mendapatkan data suhu, kelembaban, dan intensitas cahaya dari sistem monitoring dome. Data tersebut menjadi input utama untuk menghasilkan prediksi waktu pengeringan kopi.</p>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <button class="accordion-question">Bagaimana cara mengisi data ke web prediksi?</button>
                                    <div class="accordion-answer">
                                        <p>Ambil nilai suhu, kelembaban, dan cahaya terbaru dari tampilan monitoring, lalu inputkan ke kolom yang tersedia di web prediksi ini. Pastikan kapasitas kopi tidak melebihi 50 kg per batch.</p>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <button class="accordion-question">Untuk siapa hasil prediksi ini bermanfaat?</button>
                                    <div class="accordion-answer">
                                        <p>Prediksi ini bermanfaat bagi petani, operator dome, atau siapa saja yang ingin mengetahui estimasi waktu kopi akan kering, sehingga proses panen dan penggunaan energi bisa lebih efisien.</p>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <button class="accordion-question">Jika hasil prediksi lebih lama dari harapan, apa yang harus saya lakukan?</button>
                                    <div class="accordion-answer">
                                        <p>Hasil prediksi mencerminkan kondisi lingkungan saat ini. Anda bisa mengurangi massa kopi, atau menyesuaikan waktu masuk kopi berikutnya berdasarkan saran yang muncul di web.</p>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <button class="accordion-question">Apakah web prediksi ini bisa mengatur alat dome secara otomatis?</button>
                                    <div class="accordion-answer">
                                        <p>Tidak. Web prediksi hanya menghitung estimasi waktu pengeringan berdasarkan data yang Anda input. Pengaturan alat dome (lampu, kipas) sudah dikontrol otomatis oleh sistem perangkat.</p>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <button class="accordion-question">Apakah prediksi ini bisa digunakan untuk semua jenis kopi?</button>
                                    <div class="accordion-answer">
                                        <p>Web prediksi ini didesain untuk kopi robusta yang biasa dikeringkan di dome SMKN 1 Jarai, namun bisa juga digunakan untuk jenis kopi lain dengan tetap memperhatikan parameter ideal.</p>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <button class="accordion-question">Apa manfaat utama dari web prediksi dibanding hanya mengandalkan alat otomatis?</button>
                                    <div class="accordion-answer">
                                        <p>Dengan web prediksi, Anda bisa merencanakan jadwal panen, meminimalkan risiko gagal kering, mengelola energi, dan mendapat wawasan baru untuk proses yang lebih baik.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="panduan-image">
                        <!-- [DIUBAH] Mengembalikan nama file gambar asli -->
                        <img id="panduan-img" src="Dome1.jpg" alt="Info Gambar Panduan">
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <p>©2025 Prediksi Waktu Pengeringan Kopi di Dome</p>
        </div>
    </footer>

    <script>
        // Variabel Global
        let currentPage = 'beranda';
        let history = JSON.parse(localStorage.getItem('coffeePredictionHistory')) || [];
        let massaChartInstance; 
        let inputChartInstance; 

        // --- Logika Navigasi Halaman ---
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            const newPage = document.getElementById(pageId);
            if(newPage) {
                setTimeout(() => newPage.classList.add('active'), 10);
            }
            document.querySelectorAll('.nav a').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + pageId) {
                    link.classList.add('active');
                }
            });
            if (pageId === 'riwayat-prediksi') {
                renderHistory();
            }
            currentPage = pageId;
            window.scrollTo(0, 0);
        }

        // --- Logika Mode Gelap/Terang ---
        function setupTheme() {
            const themeToggle = document.getElementById('checkbox');
            const currentTheme = localStorage.getItem('theme');
            if (currentTheme) {
                document.body.classList.add(currentTheme);
                if (currentTheme === 'dark-mode') {
                    themeToggle.checked = true;
                }
            }
            themeToggle.addEventListener('change', (e) => {
                 if (e.target.checked) {
                    document.body.classList.add('dark-mode');
                    localStorage.setItem('theme', 'dark-mode');
                } else {
                    document.body.classList.remove('dark-mode');
                    localStorage.setItem('theme', 'light-mode');
                } 
                if (massaChartInstance) {
                    updateChartColors(massaChartInstance);
                }
                if (inputChartInstance) {
                    updateChartColors(inputChartInstance);
                }
            });
        }
        
        // --- Logika Form Prediksi ---
        function setupPredictionForm() {
            const predictionForm = document.getElementById('predictionForm');
            if (predictionForm) {
                predictionForm.addEventListener('submit', function(event) {
                    event.preventDefault();

                    const formData = {
                        suhu: parseFloat(document.getElementById('suhu').value),
                        kelembaban: parseFloat(document.getElementById('kelembaban').value),
                        massa: parseFloat(document.getElementById('massa').value),
                        lama_nyala: parseFloat(document.getElementById('lama_nyala').value),
                        cuaca: document.getElementById('cuaca').value
                    };

                    if (!formData.cuaca) {
                        alert('Silakan pilih kondisi cuaca.');
                        return;
                    }

                    if (formData.massa > 50) {
                        alert('Kapasitas maksimal kopi adalah 50 kg per batch.');
                        return;
                    }

                    document.getElementById('hasilPrediksi').innerHTML = 'Memproses prediksi...';

                    fetch('http://127.0.0.1:9999/predict', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(formData),
                    })
                    .then(response => {
                        if (!response.ok) {
                            return response.json().then(err => { 
                                const errorMessage = err && err.error ? err.error : response.statusText;
                                throw new Error(errorMessage);
                            });
                        }
                        return response.json();
                    })
                    .then(result => {
                        const totalJam = result.prediksi_jam_total;
                        const hari = result.prediksi_hari;
                        const jamSisa = result.prediksi_jam_sisa;
                        
                        // Kalkulasi nilai hari desimal untuk titik di grafik
                        const lamaNyalaHarian = formData.lama_nyala || 8; 
                        let nilaiGrafikHari = parseFloat(hari);
                        if (lamaNyalaHarian > 0) {
                            nilaiGrafikHari += (jamSisa / lamaNyalaHarian);
                        }

                    let hasilText;
                    const asumsiNyala = formData.lama_nyala || 8;

                        if (hari > 0) {
                        hasilText = `Diperkirakan selesai dalam <strong>${hari} hari ${jamSisa} jam</strong>`;
                        } 
                        else {
                         hasilText = `Diperkirakan selesai dalam <strong>${jamSisa} jam</strong>`;
}
5
                        hasilText += ` (Total: ${totalJam.toFixed(1)} jam, asumsi nyala ${asumsiNyala} jam/hari).`;

                        
                        document.getElementById('hasilPrediksi').innerHTML = `<span>${hasilText}</span>`;
                        
                        const detailMassaKering = document.getElementById('detailMassaKering');
                        const detailPenyusutan = document.getElementById('detailPenyusutan');
                        const predictionDetailsContainer = document.getElementById('predictionDetails');

                        detailMassaKering.textContent = `Estimasi massa kering: ${result.estimasi_massa_kering} kg`;
                        detailPenyusutan.textContent = `Estimasi penyusutan per hari: ${result.estimasi_penyusutan_harian} kg/hari`;
                        predictionDetailsContainer.style.display = 'flex';

                    const historyData = {
                         id: Date.now(),
                         inputs: `Suhu: ${formData.suhu}°C, Lembab: ${formData.kelembaban}%, Massa: ${formData.massa}kg, Cuaca: ${formData.cuaca}`,
                          result: `${hasilText.replace(/<strong>/g, '').replace(/<\/strong>/g, '')}<br>Estimasi massa kering: ${result.estimasi_massa_kering} kg`
};


                        history.unshift(historyData);
                        localStorage.setItem('coffeePredictionHistory', JSON.stringify(history));

                        renderMassaChart(result.grafik_labels, result.grafik_data);
                        
                        // Mengirim semua nilai yang dibutuhkan ke fungsi renderInputChart
                        renderInputChart(formData, nilaiGrafikHari, hari, jamSisa, totalJam); 
                        
                        showPage('hasil-grafik');
                    })
                    .catch(error => {
                        console.error('Fetch Error:', error);
                        document.getElementById('hasilPrediksi').innerText = `Gagal mendapatkan prediksi. Pastikan server backend berjalan dan coba lagi.`;
                    });
                });
            }
        }

        // --- Logika Tombol Cuaca ---
        function setupWeatherButtons() {
            const weatherButtons = document.querySelectorAll('.weather-btn');
            weatherButtons.forEach(button => {
                button.addEventListener('click', () => {
                    weatherButtons.forEach(btn => btn.classList.remove('selected'));
                    button.classList.add('selected');
                    document.getElementById('cuaca').value = button.dataset.weather;
                });
            });
            const defaultWeather = document.querySelector('.weather-btn[data-weather="cerah"]');
            if(defaultWeather) {
                defaultWeather.click();
            }
        }

        // --- Logika Riwayat ---
        function renderHistory() {
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '';
            if(history.length === 0){
                historyList.innerHTML = '<li>Belum ada riwayat prediksi.</li>';
                document.getElementById('clearHistory').style.display = 'none';
                return;
            }
            document.getElementById('clearHistory').style.display = 'flex';
            history.forEach(item => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <span><strong>Input:</strong> ${item.inputs} <br> <strong>Hasil:</strong> ${item.result}</span>
                    <button class="delete-btn" onclick="deleteHistoryItem(${item.id})">Hapus<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg></button>
                `;
                historyList.appendChild(li);
            });
        }

        function deleteHistoryItem(id){
             history = history.filter(item => item.id !== id);
             localStorage.setItem('coffeePredictionHistory', JSON.stringify(history));
             renderHistory();
        }

        function clearHistory(){
            // Mengganti window.confirm dengan dialog sederhana
            const userConfirmed = confirm('Apakah Anda yakin ingin menghapus semua riwayat?');
            if(userConfirmed){
                history = [];
                localStorage.removeItem('coffeePredictionHistory');
                renderHistory();
            }
        }
        
        // --- Logika Accordion (FAQ)---
        function setupAccordion() {
            const accordionItems = document.querySelectorAll('.accordion-question');
            accordionItems.forEach(item => {
                item.addEventListener('click', () => {
                    const isActive = item.classList.contains('active');
                    item.closest('.accordion').querySelectorAll('.accordion-question').forEach(otherItem => {
                        otherItem.classList.remove('active');
                        otherItem.nextElementSibling.style.maxHeight = null;
                        otherItem.nextElementSibling.style.padding = "0 15px";
                    });

                    if (!isActive) {
                        item.classList.add('active');
                        const answer = item.nextElementSibling;
                        answer.style.maxHeight = answer.scrollHeight + "px";
                        answer.style.padding = "0 15px 15px";
                    }
                });
            });
        }

        // --- Logika Tab Panduan ---
        function setupPanduanTabs() {
            const panduanBtns = document.querySelectorAll('.panduan-btn');
            const panduanPanels = document.querySelectorAll('.panduan-panel');
            const panduanImg = document.getElementById('panduan-img');
            const panduanImageContainer = document.querySelector('.panduan-image');

            panduanBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    panduanBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    const targetId = btn.dataset.target;
                    panduanPanels.forEach(panel => {
                        panel.classList.remove('active');
                        if (panel.id === targetId) {
                            panel.classList.add('active');
                        }
                    });

                    if (targetId === 'panel-faq') {
                        if (panduanImageContainer) panduanImageContainer.style.display = 'none';
                    } else {
                        if (panduanImageContainer) panduanImageContainer.style.display = 'block';
                        const newImage = btn.dataset.image;
                        if (newImage && panduanImg) {
                            panduanImg.src = newImage;
                        }
                    }
                });
            });
        }

        // --- Logika Slider Gambar ---
        function setupImageSlider() {
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slider-container .slide');
            const slideCount = slides.length;
            if (slideCount === 0) return;
            setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slideCount;
                slides[currentSlide].classList.add('active');
            }, 4000); // Ganti gambar setiap 4 detik
        }

        // --- Logika Grafik Penyusutan Massa ---
        function renderMassaChart(labels, data) {
            const ctx = document.getElementById('massaChart').getContext('2d');
            document.getElementById('massaChart').style.display = 'block';
            const placeholder = document.getElementById('tampilanGrafikPenyusutan').querySelector('p');
            if(placeholder) placeholder.style.display = 'none';

            if(massaChartInstance){
                massaChartInstance.destroy();
            }
            
            const isDarkMode = document.body.classList.contains('dark-mode');
            const textColor = isDarkMode ? '#E0E0E0' : '#333';
            const gridColor = isDarkMode ? '#424242' : '#E0E0E0';
            const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--color-accent').trim();
            const accentColorRgba = isDarkMode ? 'rgba(161, 136, 127, 0.2)' : 'rgba(121, 85, 72, 0.2)';

            massaChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Sisa Massa Kopi (kg)',
                        data: data,
                        backgroundColor: accentColorRgba,
                        borderColor: accentColor,
                        borderWidth: 3,
                        fill: true,
                        tension: 0.1,
                        pointBackgroundColor: accentColor,
                        pointRadius: 5,
                        pointHoverRadius: 7
                    }]
                },
                options: {
                    scales: {
                        y: { 
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: 'Sisa Massa Kopi (kg)',
                                color: textColor
                            },
                            ticks: { color: textColor, font: { size: 12 } }, 
                            grid: { color: gridColor } 
                        },
                        x: { 
                            title: {
                                display: true,
                                text: 'Hari Pengeringan',
                                color: textColor,
                                 
                              
                            },
                            ticks: { color: textColor, font: { size: 12 } }, 
                            grid: { color: gridColor } ,
                               offset: true 
                        }
                    },
                    responsive: true, 
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { 
                            display: true,
                            position: 'top',
                            labels: {
                                color: textColor
                            }
                        },
                        title: { 
                            display: true, 
                            text: 'Grafik Prediksi Penyusutan Massa Kopi per Hari', 
                            color: textColor,
                            font: {
                                size: 16,
                                weight: 'bold'
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += context.parsed.y + ' kg';
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    animation: { 
                        duration: 1000, 
                        easing: 'easeInOutQuart' 
                    }
                }
            });
        }

        // --- Logika Grafik Input & Hasil ---
    function renderInputChart(formData, nilaiGrafikHari, hari, jamSisa, totalJam) {
    const ctx = document.getElementById('inputChart').getContext('2d');
    document.getElementById('inputChart').style.display = 'block';
    const placeholder = document.getElementById('tampilanGrafikInput').querySelector('p');
    if (placeholder) placeholder.style.display = 'none';

    if (inputChartInstance) {
        inputChartInstance.destroy();
    }

    const isDarkMode = document.body.classList.contains('dark-mode');
    const textColor = isDarkMode ? '#E0E0E0' : '#333';
    const gridColor = isDarkMode ? '#424242' : '#E0E0E0';
    const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--color-accent').trim();
    const accentColorRgba = isDarkMode ? 'rgba(161, 136, 127, 0.2)' : 'rgba(121, 85, 72, 0.2)';

    inputChartInstance = new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['Suhu (°C)', 'Kelembaban (%)', 'Massa (kg)', 'Prediksi Waktu (Hari)'],
            datasets: [{
                label: 'Visualisasi Data',
                data: [formData.suhu, formData.kelembaban, formData.massa, nilaiGrafikHari],
                backgroundColor: accentColorRgba,
                borderColor: accentColor,
                borderWidth: 3,
                fill: true,
                tension: 0.1,
                pointBackgroundColor: accentColor,
                pointRadius: 5,
                pointHoverRadius: 7
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: { color: textColor, font: { size: 12 } },
                    grid: { color: gridColor },
                    title: {
                        display: true,
                        text: 'Nilai',
                        color: textColor,
                        font: {
                            size: 14,
                            weight: 'bold'
                        }
                    }
                },
                x: {
                    ticks: { color: textColor, font: { size: 12 } },
                    grid: { color: gridColor },
                    offset: true
                }
            },
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false },
                title: {
                    display: true,
                    text: 'Visualisasi Data Input & Hasil Prediksi',
                    color: textColor,
                    font: {
                        size: 16,
                        weight: 'bold'
                    }
                },
                tooltip: {
                    callbacks: {
                        label: function (context) {
                            if (context.dataIndex === 3) {
                                const details = context.chart.options.plugins.predictionDetails || {};
                                return `Prediksi: ${details.hari || 0} hari ${details.jamSisa || 0} jam (Total: ${(details.totalJam || 0).toFixed(1)} jam)`;
                            }
                            let label = 'Nilai: ';
                            if (context.parsed.y !== null) {
                                label += context.parsed.y;
                                if (context.dataIndex === 0) label += ' °C';
                                if (context.dataIndex === 1) label += ' %';
                                if (context.dataIndex === 2) label += ' kg';
                            }
                            return label;
                        }
                    }
                },
                // ✅ Ini bagian penting agar tooltip bisa akses data prediksi
                predictionDetails: {
                    hari: hari,
                    jamSisa: jamSisa,
                    totalJam: totalJam
                }
            },
            animation: {
                duration: 1000,
                easing: 'easeInOutQuart'
            }
        }
    });
}

        
        function updateChartColors(chart) {
            if (!chart) return;
            const isDarkMode = document.body.classList.contains('dark-mode');
            const textColor = isDarkMode ? '#E0E0E0' : '#333';
            const gridColor = isDarkMode ? '#424242' : '#E0E0E0';
            const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--color-accent').trim();
            const accentColorRgba = isDarkMode ? 'rgba(161, 136, 127, 0.2)' : 'rgba(121, 85, 72, 0.2)';
            
            chart.options.scales.y.ticks.color = textColor;
            chart.options.scales.y.grid.color = gridColor;
            if(chart.options.scales.y.title) chart.options.scales.y.title.color = textColor;
            chart.options.scales.x.ticks.color = textColor;
            chart.options.scales.x.grid.color = gridColor;
            if(chart.options.scales.x.title) chart.options.scales.x.title.color = textColor;
            chart.options.plugins.title.color = textColor;
            if(chart.options.plugins.legend.display) chart.options.plugins.legend.labels.color = textColor;

            chart.data.datasets[0].backgroundColor = accentColorRgba;
            chart.data.datasets[0].borderColor = accentColor;
            chart.data.datasets[0].pointBackgroundColor = accentColor;
            
            chart.update();
        }

        // --- Inisialisasi Aplikasi ---
        document.addEventListener('DOMContentLoaded', () => {
            showPage('beranda');
            setupTheme();
            setupPredictionForm();
            setupWeatherButtons();
            setupAccordion();
            setupImageSlider(); 
            setupPanduanTabs();
        });
    </script>
</body>
</html>
